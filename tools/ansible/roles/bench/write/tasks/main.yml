---
- name: "Write {{ bench_sender }} {{ bench_ack }} : {{ bench_type }}"
  command: 
    argv:
      - "{{ project_dir }}/tests/write/bin/write"
      - "{{ bench_server | ternary('--server', '--client') }}"
      - "-i"
      - "{{ bench_server_ip }}"
      - "--{{ bench_type }}"
      - "-n"
      - "{{ bench_count }}"
      - "--out"
      - "{{ project_dir }}/data/write-{{ bench_sender }}-{{ bench_ack }}-magicbuf-{{ bench_type }}-size{{ bench_msg_size }}-{{ bench_server | ternary('server', 'client') }}-{{ ansible_hostname }}-{{ ansible_date_time.iso8601 }}.data"
      - "--sender"
      - "{{ bench_sender }}"
      - "--ack"
      - "{{ bench_ack }}"
      - "--size"
      - "{{ bench_msg_size }}"
  register: run_raw
- debug:
    verbosity: 1
    var: run_raw
 
